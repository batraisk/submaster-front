<form nz-form [formGroup]="pageForm">
  <div nz-row>
    <div nz-col [nzSpan]="11" [nzXl]="8">
      <h1>{{ 'PAGE.WELCOME PAGE INFO' | translate }}</h1>
      <nz-space nzDirection="vertical" [nzSize]="16" class="mt-4" style="width:100%">
        <nz-form-item *nzSpaceItem>
          <nz-form-label [nzSpan]="24">{{ 'PAGE.BACKGROUND' | translate }}</nz-form-label>
          <div nz-row style="width:100%" class="mt-2">
            <div nz-col [nzSpan]="11" [nzXl]="10">
              <button (click)="showModalYoutube()" nz-button [nzBlock]="true" nzType="primary" nzSize="small" [nzGhost]="true">{{ 'PAGE.YOUTUBE LINK' | translate }}</button>
            </div>
            <div nz-col [nzSpan]="2" [nzXl]="4" style="text-align:center; line-height:30px">{{ 'PAGE.OR' | translate }}</div>
            <div nz-col [nzSpan]="11" [nzXl]="10">
              <button (click)="fileInput.click()" nz-button [nzBlock]="true" nzType="primary" nzSize="small" [nzGhost]="true">{{ 'PAGE.UPLOAD IMAGE' | translate }}</button>
              <input
                accept=".jpg, .jpeg, .png"
                #fileInput (change)="onSelectFile($event)"
                hidden
                type="file"
                formControlName="background"
                id="image_uploads"
                name="image_uploads"
              >
            </div>

          </div>

          <div class="background-preview" *ngIf="backgroundName">
            <div>{{backgroundName}}</div>
            <button
              nz-button
              nzType="primary"
              [nzSize]="'small'"
              nzDanger
              nzShape="circle"
              (click)="removeImage()"
            ><i nz-icon nzType="delete"></i>
            </button>
          </div>

          <div class="background-preview" *ngIf="youtube">
            <div class="link">{{youtube}}</div>
            <button
              nz-button
              nzType="primary"
              [nzSize]="'small'"
              nzDanger
              nzShape="circle"
              (click)="removeYoutube()"
            ><i nz-icon nzType="delete"></i>
            </button>
          </div>



        </nz-form-item>
        <nz-form-item *nzSpaceItem>
          <nz-form-label [nzSpan]="24" nzFor="title">{{ 'PAGE.TITLE' | translate }}</nz-form-label>
          <nz-form-control [nzSpan]="24" class="mt-2">
            <input nz-input name="title" type="text" id="title" formControlName="welcomeTitle">
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *nzSpaceItem>
          <nz-form-label [nzSpan]="24" nzFor="description">{{ 'PAGE.DESCRIPTION' | translate }}</nz-form-label>
          <nz-form-control [nzSpan]="24" class="mt-2">
            <nz-textarea-count [nzMaxCharacterCount]="100">
              <textarea rows="3" id="description" name="description" nz-input formControlName="welcomeDescription"></textarea>
            </nz-textarea-count>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *nzSpaceItem>
          <nz-form-label [nzSpan]="24" nzFor="button-text">{{ 'PAGE.BUTTON TEXT' | translate }}</nz-form-label>
          <nz-form-control [nzSpan]="24" class="mt-2">
            <input nz-input name="button-text" type="text" id="button-text" formControlName="welcomeButtonText">
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *nzSpaceItem>
          <nz-form-label [nzSpan]="24" nzFor="timer-time">{{ 'PAGE.TIMER TIME' | translate }}</nz-form-label>
          <nz-form-control [nzSpan]="24" class="mt-2 d-flex align-items-center switch-group">
            <input nz-input name="timer-time" type="text" id="timer-time" formControlName="timerTime">
            <nz-switch
              class="ml-4"
              formControlName="timerEnable"
              nzCheckedChildren="ON"
              nzUnCheckedChildren="OFF"
            ></nz-switch>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *nzSpaceItem>
          <nz-form-label [nzSpan]="24" nzFor="timer-text">{{ 'PAGE.TIMER TEXT' | translate }}</nz-form-label>
          <nz-form-control [nzSpan]="24" class="mt-2">
            <input nz-input name="timer-text" type="text" id="timer-text" formControlName="timerText">
          </nz-form-control>
        </nz-form-item>
      </nz-space>
    </div>

    <div nz-col nzSpan="1" style="text-align:center; padding: 10px 0;">
      <nz-divider [nzOrientation]="'center'" [nzType]="'vertical'" style="height: 100%;"></nz-divider>
    </div>

    <div nz-col [nzSpan]="11" [nzXl]="15">
      <h1>{{ 'PAGE.DESIGN' | translate }}</h1>
      <nz-space nzDirection="vertical" [nzSize]="16" class="mt-4" style="width:100%">
        <nz-form-item *nzSpaceItem>
          <div nz-row style="width:100%">
            <div nz-col [nzSpan]="11">
              <nz-form-label [nzSpan]="24" nzFor="timer-text">{{ 'PAGE.LAYOUT' | translate }}</nz-form-label>
              <nz-form-control [nzSpan]="24" class="mt-2 w-100">
                <nz-select formControlName="layout" class="w-100">
                  <nz-option nzLabel="template-1" nzValue="template_1"></nz-option>
                  <nz-option nzLabel="template-2" nzValue="template_2"></nz-option>
                  <nz-option nzLabel="template-3" nzValue="template_3"></nz-option>
                  <nz-option nzLabel="template-4" nzValue="template_4"></nz-option>
                </nz-select>
              </nz-form-control>
            </div>
            <div nz-col [nzSpan]="1"></div>
            <div nz-col [nzSpan]="12">
              <nz-form-label [nzSpan]="24" nzFor="theme">{{ 'PAGE.COLOR THEME' | translate }}</nz-form-label>
              <nz-form-control [nzSpan]="24" class="mt-2 w-100">
                <nz-radio-group [nzSize]="'large'" formControlName="theme" nzName="theme">
                  <label *ngFor="let theme of themes" nz-radio [nzValue]="theme" [class]="theme"></label>
                </nz-radio-group>
              </nz-form-control>
            </div>
          </div>
        </nz-form-item>
        <nz-form-item *nzSpaceItem>
          <nz-form-label [nzSpan]="24">{{ 'PAGE.PREVIEW' | translate }}</nz-form-label>
          <nz-form-control [nzSpan]="24" class="mt-2 w-100">
            <nz-radio-group class="radio-devices" [(ngModel)]="view" nzName="theme" [ngModelOptions]="{standalone: true}">
              <label nz-radio-button nzValue="mobile">
                <i nz-icon nzType="mobile" nzTheme="outline"></i>
              </label>
              <label nz-radio-button nzValue="desktop">
                <i nz-icon nzType="desktop" nzTheme="outline"></i>
              </label>
            </nz-radio-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *nzSpaceItem [nzJustify]="'center'">
          <app-mobile-view
            [device]="view"
            [color]="pageForm.controls['theme'].value"
            [title]="pageForm.controls['welcomeTitle'].value"
            [description]="pageForm.controls['welcomeDescription'].value"
            [buttonText]="pageForm.controls['welcomeButtonText'].value"
            [timerText]="pageForm.controls['timerText'].value"
            [time]="pageForm.controls['timerTime'].value"
            [timerEnable]="pageForm.controls['timerEnable'].value"
            [template]="pageForm.controls['layout'].value"
            [backgroundUrl]="backgroundUrl"
            [youtube]="youtube"
          ></app-mobile-view>
        </nz-form-item>
      </nz-space>
    </div>
  </div>
</form>

<nz-modal [(nzVisible)]="isVisibleYoutubeModal" nzTitle="{{ 'PAGE.YOUTUBE LINK' | translate }}" (nzOnCancel)="handleCancelModal()">
  <ng-container *nzModalContent>
    <input
      nz-input
      name="title"
      type="text"
      (change)="somethingChanged($event)"
    >
    <div class="youtube-frame-container" *ngIf="youtubeLink">
      <iframe
        width="472"
        height="280"
        [src] = "youtubeLink | safe: 'resourceUrl'"
        title="YouTube video player"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
      ></iframe>
    </div>
  </ng-container>
  <div *nzModalFooter class="d-flex">
    <button nz-button nzType="default" nzSize="small" (click)="handleCancelModal()">{{ 'ACTIONS.CANCEL' | translate }}</button>
    <button [disabled]="!youtubeLink" nz-button nzType="primary" nzSize="small" (click)="handleOkModal()">{{ 'ACTIONS.SAVE' | translate }}</button>
  </div>
</nz-modal>
